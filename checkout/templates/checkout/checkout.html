{% extends "base.html" %}
{% load static %}
{% load cart_tools %}

{% block extracss %}
    <link rel="stylesheet" href="{% static 'cart/css/cart.css' %}"> 
{% endblock %}

{% block content %}
    <div class="container">             
        <div class="row">
            <div class="col-12 checkout-header">
                <p>
                    Shipping Information
                </p>   
                <hr class="cart-separator">   
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <form action="{% url 'checkout' %}" method="POST" id="checkout-form">
                    {% csrf_token %}
                    <fieldset>
                        <legend>Shipping Adddress</legend>
                        {{ order_form.first_name | as_crispy_field }}
                        {{ order_form.last_name | as_crispy_field }}       
                        {{ order_form.email_address | as_crispy_field }}  
                        {{ order_form.address | as_crispy_field }}   
                        {{ order_form.postcode | as_crispy_field }}  
                        {{ order_form.town | as_crispy_field }}  
                        {{ order_form.country | as_crispy_field }}
                        {{ order_form.comments | as_crispy_field }}                        
                    </fieldset>        
                </form>                
            </div>
        </div>
        <div class="row">
            <div class="col-12 checkout-header">
                <p>
                    Your Toys <!--Add username-->
                </p>   
                <hr class="cart-separator">   
            </div>
        </div>
        <div class="row cart-items-header">
            <div class="col-2"></div>
            <div class="col-2">
                <p class="cart-item-header">Toy</p>
            </div>
            <div class="col-2">
                <p class="cart-item-header">Price</p>
            </div>
            <div class="col-2">
                <p class="cart-item-header">Quantity</p>
            </div>
            <div class="col-2 offset-2">
                <p class="cart-item-header">Subtotal</p>
            </div>                
        </div>        
        {% for item in cart_items %}                 
        <div class="row cart-items">                   
            <div class="col-2">
                <a href="{% url 'toy_detail' item.toy.id %}">
                    <img src="../media/{{ item.toy.image }}"    class="cart-image" alt="">
                </a>
            </div>
            <div class="col-2">
                <p>{{ item.toy.name }}</p>
            </div>
            <div class="col-2">
                <p>£{{ item.toy.price }}</p>
            </div>   
            <div class="col-2">
                <p>{{ item.quantity }}</p>
            </div>                        
            <div class="col-2 offset-2">
                <p>£{{ item.toy.price | cart_subtotal:item.quantity }}</p>
            </div>                                               
        </div>
        {% endfor %}                 
        <hr class="cart-separator">
        <div class="row cart-total">
            <div class="col-2 offset-8">
                <p class="cart-item-header">Total</p>
            </div>
            <div class="col-2">
                <p>£{{ total }}</p>
            </div>
        </div>        
    </div>


{% endblock %}